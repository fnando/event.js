(function(){var e=function(g){return g.replace(/ +/," ").split(" ")};var c=0;var d=function(i){var g=this;var h=g.events[i.type];var j=i.target;h.forEach(function(l){var m=l.context||g;if(typeof(l.selector)!=="string"){return l.callback.call(m,i)}var n=g.querySelectorAll(l.selector);var k=Array.prototype.some.call(n,function(o){return o===j});if(k){l.callback.call(m,i)}})};var a=function(j,g,k,i){j=e(j);var h=this;if(!h.events){h.events={}}if(typeof(g)==="function"){i=k;k=g;g=null}j.forEach(function(l){if(!h.events[l]){h.events[l]=[];h.addEventListener(l,d)}k=i?k.bind(i):k;if(!k.guid){k.guid=(++c)}h.events[l].push({selector:g,callback:k})});return h};var f=function(i,g,j){i=e(i);var h=this;if(!h.events){return}if(typeof(g)==="function"){j=g;g=null}i.forEach(function(l){var k=h.events[l];if(!k){return}k.forEach(function(o,n){var m=(!g||g===o.selector)&&(!j||j.guid===o.callback.guid);m&&k.splice(n,1)});if(k.length===0){h.removeEventListener(l,d)}});return h};var b=function(h){var i=Array.prototype.slice.call(arguments,1);if(typeof(h)==="string"){var g=h;h=document.createEvent("HTMLEvents");h.initEvent(g,true,true)}h.data=i;this.dispatchEvent(h);return this};if(!Element.prototype.addEventListener){Element.prototype.addEventListener=Window.prototype.addEventListener=function(g,h){this.attachEvent("on"+g,function(i){i.target=i.srcElement;h.call(this,i)}.bind(this))};Element.prototype.removeEventListener=Window.prototype.removeEventListener=function(g,h){this.detachEvent("on"+g,h)};Element.prototype.dispatchEvent=Window.prototype.dispatchEvent=function(g){this.fireEvent("on"+g.type,g)}}if(!document.createEvent){document.createEvent=function(){return document.createEventObject()};Event.prototype.initEvent=function(i,h,g){this.eventType=i;this.type=i;this.bubbles=h;this.cancelable=g}}if(!Event.prototype.stopPropagation){Event.prototype.stopPropagation=function(){this.cancelBubble=true};Event.prototype.preventDefault=function(){this.returnValue=false}}Window.prototype.on=Element.prototype.on=a;Window.prototype.off=Element.prototype.off=f;Window.prototype.trigger=Element.prototype.trigger=b})();